# 「はじめの英文読解ドリル」構造化設計案

## 1. 全体像：3つのレイヤー

この参考書には3種類の情報がある。それぞれを別レイヤーで管理する。

```
レイヤー1: 知識ノード（concepts/）
  → 「始める前に」ページ + 「ポイント」セクションの知識
  → 参考書に依存しない標準体系

レイヤー2: 英文データベース（sentences/）
  → ドリル1〜4の全英文 + 入試演習の英文
  → 各英文に「どの知識ノードを練習しているか」をタグ付け

レイヤー3: セクションマッピング（mappings/）
  → 参考書のセクション → 知識ノードの対応表
  → 他の参考書（核心、成川等）へのマッピングもここ
```

---

## 2. レイヤー1: 知識ノードの設計

### カテゴリ体系（この参考書から抽出）

この参考書は「読解の視点」で構成されているため、カテゴリは以下の2軸で整理する。

#### 軸A: 文法テーマ別（従来の文法書の視点）
```
品詞と文型/
  基本概念/         ... SVOCM、品詞の役割、前置詞+名詞
  5文型/            ... 各文型の意味・判別
  SVC動詞/          ... look, become, remain等
  SVOO動詞/         ... give, cost, deny等
  SVOC動詞/         ... make, find, regard等
動詞の型/
  SVO+準動詞/       ... SVO to do, SVO do/doing/done
  助動詞的表現/     ... seem to, be likely to等
  SVO+前置詞句/     ... rob O of, prevent O from等
  受動態/           ... 能動→受動の変換
  There VS構文/
句と節/
  基本概念/         ... 句・節の定義、品詞判定
  名詞句/           ... 動名詞、不定詞、疑問詞+不定詞
  名詞節/           ... 疑問代名詞、関係代名詞what、疑問副詞、接続詞
  形容詞句/         ... 不定詞、分詞
  形容詞節/         ... 関係代名詞、前置詞+関係代名詞、関係副詞
  副詞句/           ... 不定詞（5用法）、分詞構文
  副詞節/           ... 接続詞
  形式のit/
準動詞の意味上の主語/
  不定詞/           ... for S to do
  動名詞・分詞構文/ ... S doing, with S doing
読解テクニック/
  名詞構文/
  無生物主語構文/
  同格/
  並列と共通/
  強調構文/
  倒置/
```

#### 軸B: 読解スキル別（この参考書の視点）
```
文の骨格を見抜く     → Ch1（SVOCM判別、Mのカッコくくり）
動詞の型を把握する   → Ch2（Vを見て後ろの形を予想する）
名詞のカタマリを認識 → Ch3（[名詞句/節]を見抜く）
M(形容詞/副詞)を認識 → Ch4（(形容詞句/節)〈副詞句/節〉を見抜く）
準動詞の主語を把握   → Ch5（明示/非明示を判断する）
応用的な読解         → Ch6（名詞構文、無生物主語、同格、並列、強調、倒置）
```

### 知識ノードの粒度

調査の結果、以下の粒度で知識ノードを作るのが適切。

**「始める前に」ページ → 概念定義ノード（1セクションあたり3〜8ノード）**
- 例: 「句と節の定義」「品詞判定ルール（SOC→名詞、M→形容詞/副詞）」

**「ポイント」セクション → 具体的知識ノード（1セクションあたり2〜5ノード）**
- 例: 「関係代名詞の4つの格」「目的格の省略パターン」

**動詞リスト → リストノード（1セクションあたり1〜3ノード）**
- 例: 「SVC動詞：Cに感じる系」「SVO+of動詞リスト」

### 推定ノード数

| Chapter | セクション数 | 概念ノード | 知識ノード | リストノード | 小計 |
|---------|------------|-----------|-----------|------------|------|
| Ch1     | 7          | 8         | 10        | 8          | 26   |
| Ch2     | 9          | 7         | 12        | 12         | 31   |
| Ch3     | 6          | 6         | 10        | 2          | 18   |
| Ch4     | 7          | 4         | 14        | 4          | 22   |
| Ch5     | 3          | 4         | 6         | 0          | 10   |
| Ch6     | 7          | 6         | 16        | 2          | 24   |
| **合計** | **39**    | **35**    | **68**    | **28**     | **131** |

→ この参考書だけで約130ノード。全参考書で400〜500ノードの見積もりと整合する。

---

## 3. レイヤー2: 英文データベースの設計

### 英文の総数

| ドリル種別 | 1セクションあたり | 33セクション分 | 特徴 |
|-----------|-----------------|---------------|------|
| ドリル1   | 5文             | 165文          | ガイド付き（例文1+練習4） |
| ドリル2   | 5文             | (ドリル1と同一) | 自力分析 |
| ドリル3   | 5文             | 165文          | 新規文+空所補充和訳 |
| ドリル4   | 5文             | 165文          | 新規文+完全和訳 |
| 入試演習  | --              | 約30文         | 実際の入試問題 |
| **合計**  |                 | **約525文**（ユニーク約360文） | |

### 英文データの構造案

```yaml
# sentences/hajime_ch04_02.yaml（セクション単位で管理）

source:
  book: はじめの英文読解ドリル
  section: Ch04_02
  title: 形容詞節①_関係代名詞
  pages: p.94-97

sentences:
  - id: haj-04-02-d1-01
    drill: 1           # ドリル番号（1〜4）
    number: 1           # ドリル内の番号
    role: example       # example / practice
    english: "The police found a pedestrian (who had witnessed the accident)."
    japanese: "警察は、（その事故を目撃した）歩行者を見つけた。"
    structure:
      全体: "S V O M"
      内部: "Ⓢ Ⓥ Ⓞ"
    knowledge_tags:     # この英文が練習している知識ノード
      - rel-010         # 関係代名詞の格（主格）
    notes: "文全体の視点: 関係代名詞節がpedestrian を修飾する形容詞節(M)"

  - id: haj-04-02-d1-02
    drill: 1
    number: 2
    role: practice
    english: "The topic (which she talked about) was interesting."
    japanese: "（彼女が話した）話題は、面白かった。"
    structure:
      全体: "S M V C"
      内部: "前のⒶ Ⓢ Ⓥ"
    knowledge_tags:
      - rel-010         # 関係代名詞の格（目的格）
      - rel-014         # 前置詞+関係代名詞（前置詞残留パターン）
    notes: "whichはtalkのaboutの目的語。前置詞が文末に残るパターン"
```

### なぜセクション単位か

- 知識ノードと1対1ではない（1つの英文が複数ノードに関連する）
- セクション単位だと33ファイル。管理しやすい
- ドリル1→4の段階的難易度もセクション内で完結

---

## 4. レイヤー3: セクションマッピングの設計

```yaml
# mappings/はじめの英文読解ドリル.yaml

book: はじめの英文読解ドリル
sections:
  - id: Ch01_00
    title: 「品詞と文型」を始める前に
    pages: p.6-7
    type: introduction   # introduction / drill
    knowledge_nodes:
      - strc-001  # 主要素（SVOC）の定義
      - strc-002  # 5文型の定義
      - strc-003  # 修飾要素（M）の概念
      - strc-004  # 前置詞+名詞はM
      - strc-005  # 品詞の役割表
      - strc-006  # Mのカッコくくり

  - id: Ch04_02
    title: 形容詞節①_関係代名詞
    pages: p.94-97
    type: drill
    knowledge_nodes:
      - rel-010  # 関係代名詞の格
      - rel-011  # 目的格の省略
      - rel-012  # 関係代名詞that
    prerequisites:     # このセクションの前提
      - Ch01_00        # SVOCMの基本
      - Ch04_00        # 形容詞・副詞のカタマリの概念
    sentence_file: sentences/hajime_ch04_02.yaml
```

---

## 5. 抜け漏れを防ぐためのチェック構造

### 5-1. 知識ノード → 英文の網羅性チェック

```
全知識ノードに対して、
  「このノードをknowledge_tagsに持つ英文が1つ以上あるか？」
をチェックする。

→ 英文が0の知識ノードは「この参考書では練習できない知識」
→ 他の参考書から補完が必要
```

### 5-2. 英文 → 知識ノードの網羅性チェック

```
全英文に対して、
  「この英文のknowledge_tagsが空でないか？」
をチェックする。

→ タグが空の英文は「どの知識を練習しているか未分析」
```

### 5-3. セクション → 知識ノードの対応チェック

```
全セクションの「ポイント」に書かれている内容が、
  知識ノードとして漏れなく登録されているか？
をチェックする。
```

### 5-4. 依存関係の整合性チェック

```
全知識ノードのprerequisitesが、
  実際に先に学ぶセクションに含まれる知識ノードか？
をチェックする。
```

---

## 6. 入試演習の扱い

入試演習（Exam_01, Exam_02）は特殊：
- 複数の知識が1文に複合的に現れる
- 「復習ポイント」として、どのセクションの知識が使われているか明示されている

```yaml
# sentences/hajime_exam_01.yaml

source:
  book: はじめの英文読解ドリル
  section: Exam_01
  title: 入試実戦演習①

sentences:
  - id: haj-exam-01-q1-s1
    problem: 1
    university: 青山学院大学
    english: "The Internet is no longer concerned with information exchange alone."
    japanese: "インターネットは、もはや情報交換だけに関わっているわけではない。"
    structure:
      全体: "S V M C M"
    knowledge_tags:
      - strc-003  # M(副詞)の識別
      - strc-005  # 品詞の役割（形容詞→C）
    review_points:    # 参考書に記載の「復習ポイント」
      - "5文型と「M」"
      - "形容詞句（不定詞・分詞）"
      - "SVO＋to do"
      - "並列と共通"
```

---

## 7. ファイル構成案

```
seras-english-knowledge/
├── knowledge/              # レイヤー1: 知識ノード
│   ├── 品詞と文型/
│   │   ├── strc-001_主要素の定義.yaml
│   │   ├── strc-002_5文型の定義.yaml
│   │   └── ...
│   ├── 動詞の型/
│   │   ├── vtyp-001_SVO_to_do概説.yaml
│   │   └── ...
│   ├── 句と節/
│   │   └── ...
│   ├── 準動詞の意味上の主語/
│   │   └── ...
│   └── 読解テクニック/
│       └── ...
│
├── sentences/              # レイヤー2: 英文データベース
│   └── はじめの英文読解ドリル/
│       ├── Ch01_01.yaml
│       ├── Ch01_02.yaml
│       ├── ...
│       ├── Ch06_06.yaml
│       ├── Exam_01.yaml
│       └── Exam_02.yaml
│
├── mappings/               # レイヤー3: セクションマッピング
│   ├── はじめの英文読解ドリル.yaml
│   ├── 核心.yaml           # 将来追加
│   └── 成川.yaml           # 将来追加
│
├── tests/                  # 確認テスト（別管理）
│   └── ...
│
└── docs/                   # ドキュメント
    ├── ブレスト_2025-02-03.md
    └── 構造化設計案_はじめの英文読解ドリル.md
```

---

## 8. 作業の優先順位

### Phase 1: 知識ノード（最重要）
1. Ch01の知識ノード（26ノード）→ 全体の基盤
2. Ch03-04の知識ノード（40ノード）→ 句・節の体系が中核
3. Ch02の知識ノード（31ノード）→ 動詞の型
4. Ch05-06の知識ノード（34ノード）→ 応用

### Phase 2: 英文データベース
1. まずCh01とCh04の英文をタグ付け（基盤+関係詞）
2. 残りのChapterを順次

### Phase 3: セクションマッピング
1. はじめの英文読解ドリルのマッピング完成
2. 核心・成川のマッピング追加

---

## 9. 未解決の設計判断

### A. 知識ノードのID体系
- 現在の案: `strc-001`（品詞と文型）、`vtyp-001`（動詞の型）等
- この参考書固有のカテゴリ vs 汎用カテゴリの問題
- → まずこの参考書ベースで作り、他の参考書追加時に調整

### B. 英文の構造分析の表記
- この参考書独自の記号体系（Ⓢ、Ⓥ、Ⓞ、▲等）をそのまま使うか？
- → この参考書の記号をベースにしつつ、テキストで表現可能な形式にする

### C. 知識ノードの「重複」問題
- 例: 「関係代名詞」はCh03_02（名詞節として）とCh04_02（形容詞節として）の両方に出る
- → 1つの知識ノードに統合するか、視点ごとに分けるか？
- → **視点ごとに分ける**方が自然。名詞節whatと形容詞節whichは別の知識

### D. ドリル2の扱い
- ドリル2はドリル1と同一英文（自力練習）
- → 英文データベースにはドリル1の文だけ登録し、ドリル2は省略
